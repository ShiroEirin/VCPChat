{
  "name": "Flowlock",
  "displayName": "心流锁控制器",
  "pluginType": "synchronous",
  "version": "2.3.0",
  "description": "允许AI像人类用户一样控制心流锁功能，包括启动、停止、设置提示词、获取输入框内容、查询状态等操作。",
  "author": "Kilo Code",
  "license": "MIT",
  "entryPoint": {
    "command": "node flowlock.js"
  },
  "communication": {
    "protocol": "stdio"
  },
  "capabilities": {
    "invocationCommands": [
      {
        "command": "start",
        "description": "功能: 为指定的Agent和话题启动心流锁，启动后UI会显示发光效果，并自动开始续写循环。\n参数:\n- command (字符串, 必需): 固定为 'start'\n- agentId (字符串, 必需): 要启动心流锁的Agent ID\n- topicId (字符串, 必需): 要启动心流锁的话题ID\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」start「末」,\nagentId:「始」agent_123「末」,\ntopicId:「始」topic_456「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "stop",
        "description": "功能: 停止当前正在运行的心流锁，UI的发光效果会消失，自动续写循环会停止。\n参数:\n- command (字符串, 必需): 固定为 'stop'\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」stop「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "promptee",
        "description": "功能: 设置下一次自动续写时使用的提示词内容，提示词会被追加到输入框的现有内容后面。\n参数:\n- command (字符串, 必需): 固定为 'promptee'\n- prompt (字符串, 必需): 要设置的提示词内容\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」promptee「末」,\nprompt:「始」请继续描述主角的内心活动「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "prompter",
        "description": "功能: 指定一个外部数据源，从该数据源获取内容作为下一次续写的提示词，并追加到输入框。这为将来扩展更多数据源预留了接口。\n参数:\n- command (字符串, 必需): 固定为 'prompter'\n- promptSource (字符串, 必需): 数据源的标识或路径\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」prompter「末」,\npromptSource:「始」external_api_endpoint「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "clear",
        "description": "功能: 清空输入框中的所有内容，用于重置提示词或开始全新的输入。\n参数:\n- command (字符串, 必需): 固定为 'clear'\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」clear「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "remove",
        "description": "功能: 从输入框中移除所有匹配的文本。\n参数:\n- command (字符串, 必需): 固定为 'remove'\n- target (字符串, 必需): 要移除的文本内容\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」remove「末」,\ntarget:「始」需要删除的文本「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "edit",
        "description": "功能: 编辑输入框中的指定文本，类似diff操作，查找oldText并替换为newText（仅替换第一个匹配项）。\n参数:\n- command (字符串, 必需): 固定为 'edit'\n- oldText (字符串, 必需): 要查找的原始文本\n- newText (字符串, 必需): 替换后的新文本\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」edit「末」,\noldText:「始」原来的文字「末」,\nnewText:「始」修改后的文字「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "command": "get",
        "description": "功能: 获取输入框中当前的所有文本内容，返回完整的输入框文本。\n参数:\n- command (字符串, 必需): 固定为 'get'\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」get「末」\n<<<[END_TOOL_REQUEST]>>>\n返回格式:\n{\n  \"status\": \"success\",\n  \"message\": \"输入框当前内容为: \\\"文本内容\\\"\",\n  \"content\": \"文本内容\"\n}"
      },
      {
        "command": "status",
        "description": "功能: 获取心流锁的当前状态，包括是否启用、正在处理、关联的Agent和话题等信息。\n参数:\n- command (字符串, 必需): 固定为 'status'\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」Flowlock「末」,\ncommand:「始」status「末」\n<<<[END_TOOL_REQUEST]>>>\n返回格式:\n{\n  \"status\": \"success\",\n  \"message\": \"心流锁已启用 (Agent: agent_id, Topic: topic_id, 处理中: 否)\",\n  \"flowlockStatus\": {\n    \"isActive\": true,\n    \"isProcessing\": false,\n    \"agentId\": \"agent_id\",\n    \"topicId\": \"topic_id\"\n  }\n}"
      }
    ]
  }
}